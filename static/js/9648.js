(self.webpackChunkmy_webpack=self.webpackChunkmy_webpack||[]).push([[9648],{98503:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.data_story_text_color_arr=["text-primary","color-white","text-red","text-blue","text-green"]},48064:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default_story_arr=t.default_story_item_viewer_obj=t.default_story_viewer_arr=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(55852),o=r(98503),i=r(44550),l=r(39727),u=r(69565),c=r(8047),s=r(58822),d=r(7605);function _(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var f=function(){return n({id:(0,u.getRandomId)()},(0,s.getRandomUser)(),{has_reply:(0,l.getRandomBool)(),type_like_arr:(0,u.getRandomNumberArr)({min:0,max:5})})},m=(t.default_story_viewer_arr=function(){return(0,d.getDefaultArr)(f,0,10)},t.default_story_item_viewer_obj=function(){return n({},{id:(0,u.getRandomId)(),vid_pic:(0,c.getRandomVidPic)(),created_time:(new Date).toString(),text:(0,l.getRandomBool)()?"Text "+(0,u.getRandomNumber)(0,1e4):"",top_text:(0,u.getRandomNumber)(30,60)+"%",left_text:(0,u.getRandomNumber)(30,60)+"%",color_text_ix:(0,u.getRandomId)(o.data_story_text_color_arr.length-1),scale_text:Math.floor(10*Math.random()+10)/10},{viewer_arr:[],count_viewer:e=(0,l.getRandomBool)()?(0,u.getRandomNumber)(0,30):0,count_friend_viewer:(0,u.getRandomNumber)(0,e)});var e}),p=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?(0,u.getRandomNumber)(1,10):0,r=0==t?1:t;return n({},(0,s.getRandomUser)(),{list:[m()],count_new:t,count:(0,u.getRandomNumber)(r,r+((0,l.getRandomBool)()?5:0))})};t.default_story_arr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,l.getRandomBool)()?[n({},p((0,l.getRandomBool)()),{user:i.default_define_user})]:[];if("yours"==e)return t;var r=[].concat(_((0,d.getDefaultArr)((function(){return p(!0)}),0,4)),_((0,d.getDefaultArr)((function(){return p(!1)}),0,4))).slice(0,a.IS_MOBILE?6:4);return r}},22387:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handle_API_FeedStory_R=t.handle_API_FeedStoryItemViewer_L=t.handle_API_FeedStory_L=void 0;var n,a,o,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=(t.handle_API_FeedStory_L=(n=s(regeneratorRuntime.mark((function e(){var t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"followed";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.API_FeedStory_L)({c_count:n,page:1,size:l.IS_MOBILE?6:4,story_type:a});case 2:return t=e.sent,r=t.data.data,(0,c.changeDataStory)(r),e.abrupt("return",i({},t.data,{data:r}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),t.handle_API_FeedStoryItemViewer_L=(a=s(regeneratorRuntime.mark((function e(t){var r,n=t.story_id,a=void 0===n?0:n,o=t.c_count,i=void 0===o?0:o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.API_FeedStoryItemViewer_L)({story_model:a,c_count:i,page:1,size:10});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)}),t.handle_API_FeedStory_R=(o=s(regeneratorRuntime.mark((function e(t){var r,n=t.is_next,a=void 0===n||n,o=t.story_id,i=void 0===o?0:o,l=t.story_type,c=void 0===l?"":l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.API_FeedStoryItem_R)({story_model:i,is_next:a,story_type:c});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)}),r(55852)),u=r(64748),c=r(86393);function s(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(a,o){try{var i=t[a](o),l=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(l).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(l)}("next")}))}}},86393:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeDataStory=function(e){e.map((function(e){return e.active_step=0==e.count_new?0:e.count-e.count_new,e.active_item_ix=0,e.has_fetched=!1,e}))}},64748:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.API_FeedStoryItem_R=t.API_FeedStoryItemViewer_L=t.API_FeedStory_L=void 0;var n,a=(n=r(87421))&&n.__esModule?n:{default:n},o=r(50918),i=r(48064);t.API_FeedStory_L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.API_FakeReal)((0,i.default_story_arr)(e.story_type),(function(){return(0,a.default)({url:"api/facebook/story-lc/",method:"GET",params:e})}),e,!0)},t.API_FeedStoryItemViewer_L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.API_FakeReal)((0,i.default_story_viewer_arr)(),(function(){return(0,a.default)({url:"api/facebook/story-item-viewer-l/",method:"GET",params:e})}),e)},t.API_FeedStoryItem_R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.API_FakeReal)((0,i.default_story_item_viewer_obj)(),(function(){return(0,a.default)({url:"api/facebook/story-item-r/",method:"GET",params:e})}))}},49648:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(67294),o=f(a),i=(f(r(45697)),r(22387)),l=r(82403),u=f(r(98989)),c=f(r(61498)),s=f(r(40535)),d=f(r(75561)),_=f(r(26537));function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function p(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(a,o){try{var i=t[a](o),l=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(l).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(l)}("next")}))}}function v(e){var t,r,f=(t=p(regeneratorRuntime.mark((function e(){var t,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J((function(e){return n({},e,{is_fetching:!0})})),e.next=3,(0,i.handle_API_FeedStory_R)({is_next:r,story_id:M,story_type:x});case 3:t=e.sent,r?(b.list=[].concat(m(b.list),[t]),b.active_item_ix+=1,b.active_step+=1):(b.list=[t].concat(m(b.list)),b.active_step-=1),J((function(e){return n({},e,{is_fetching:!1})}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)}),v=(r=p(regeneratorRuntime.mark((function e(){var t,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J((function(e){return n({},e,{is_fetching_viewer:!0},a)})),e.next=3,(0,i.handle_API_FeedStoryItemViewer_L)({story_id:M,c_count:B.length});case 3:t=e.sent,r=t.data,console.log(r),B.push.apply(B,m(r)),J((function(e){return n({},e,{is_fetching_viewer:!1})}));case 8:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),y=e.story_arr,h=e.count_story,w=e.active_ix,x=e.story_type,g=e.is_fetching_story,E=e.handleNextStoryUser,S=e.handlePrevStoryUser,b=(e.closeScreen,y[w]),I=b.list,N=b.user,P=b.count,R=(b.count_new,b.active_step),A=b.active_item_ix,k=I[A],M=k.id,O=k.vid_pic,j=k.created_time,F=k.text,T=k.top_text,L=k.left_text,C=k.color_text_ix,V=k.scale_text,B=k.viewer_arr,D=k.count_viewer,U=k.count_friend_viewer,z=R<P-1||w<(h||y.length)-1,G=R>0||w>0,H=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}((0,a.useState)({is_fetching:!1,is_show_viewer:!1,is_fetching_viewer:!1}),2),q=H[0],J=H[1],K=q.is_fetching,Q=q.is_show_viewer,W=q.is_fetching_viewer,X=(0,l.useForceUpdate)();function Y(){Q&&J((function(e){return n({},e,{is_show_viewer:!1})}))}return(0,a.useEffect)((function(){Y()}),[M]),o.default.createElement("div",{className:"ScreenStoryItem wh-100 user-select-none "+(K?"pointer-events-none opacity-05":"")},o.default.createElement("div",{className:"ScreenStoryItem_item ScreenStoryItem_wh"},o.default.createElement(s.default,{handleCloseStoryItem:function(){history.back()},active_step:R,user:N,count:P,vid_pic:O,created_time:j,text:""+F,top_text:T,left_text:L,color_text_ix:C,scale_text:V})),o.default.createElement("div",{className:"pos-abs-center"},o.default.createElement(u.default,{is_fetching:K||g})),o.default.createElement("div",null,o.default.createElement(c.default,{is_btn_circle:!0,is_has_next:z,is_has_prev:G,handleNext:function(){z&&(R==P-1?E():A==I.length-1?f(!0):(b.active_item_ix+=1,b.active_step+=1,X()))},handlePrev:function(){G&&(0==R?S():0==A?f(!1):(b.active_step-=1,b.active_item_ix-=1,X()))}})),o.default.createElement("div",{className:"ScreenStoryItem_viewer_list ScreenStoryItem_wh pos-abs-center "+(Q?"":"display-none")},o.default.createElement("div",{className:"ScreenStoryItem_viewer_list-contain h-100per margin-auto"},o.default.createElement(d.default,{viewer_arr:B,count_friend_viewer:U,is_fetching:W,handleShowMore:function(){v()},handleCloseFriendViewer:Y}))),o.default.createElement("div",{className:"ScreenStoryItem_bottom"},o.default.createElement(_.default,{count_viewer:D,count_friend_viewer:U,count_other_viewer:D-U,handleToggleFriendView:function(){Q||0!=B.length?J((function(e){return n({},e,{is_show_viewer:!Q})})):v({is_show_viewer:!0})}})))}r(8863),v.propTypes={},t.default=v},46054:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(67294)),a=(o(r(45697)),r(98503));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.text,r=e.top_text,o=e.left_text,i=e.color_text_ix,l=e.scale_text;return n.default.createElement("div",{className:"StoryText",style:{top:r,left:o}},n.default.createElement("div",{className:"StoryText_contain",style:{transform:"scale("+l+")"}},n.default.createElement("div",{className:"StoryText_item"},n.default.createElement("span",{className:""+a.data_story_text_color_arr[i]},t))))}r(24150),i.propTypes={},t.default=i},40535:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(67294)),a=(s(r(45697)),r(55852)),o=s(r(45915)),i=s(r(37930)),l=s(r(8119)),u=s(r(22132)),c=s(r(72508));function s(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=e.handleCloseStoryItem,r=e.active_step,s=e.user,d=e.count,_=e.vid_pic,f=e.created_time,m=e.text,p=e.top_text,v=e.left_text,y=e.color_text_ix,h=e.scale_text;return n.default.createElement("div",{className:"StoryItem wh-100 "+(a.IS_MOBILE?"position-rel":"")},n.default.createElement("div",{className:"StoryItem-contain position-rel wh-100"},n.default.createElement(u.default,{vid_pic:_,text:m,top_text:p,left_text:v,color_text_ix:y,scale_text:h}),n.default.createElement("div",{className:"StoryItem_head"},n.default.createElement("div",{className:"StoryItem_head-contain padding-8px"},d>1?n.default.createElement("div",{className:"StoryItem_step"},n.default.createElement(c.default,{count_step:d,active_step:r})):null,n.default.createElement("div",{className:"StoryItem_user width-fit-content"},n.default.createElement(l.default,{user:s,content:n.default.createElement("span",{className:"font-12px margin-left-5px"},(0,o.default)((new Date).getTime()-new Date(f).getTime())),is_inline_block:!0})))),n.default.createElement("div",{className:"StoryItem_close "+(a.IS_MOBILE?"":"display-none")},n.default.createElement("div",{className:"StoryItem_close-contain display-flex-center bg-ccc brs-50",onClick:t},n.default.createElement(i.default,{y:400,size_icon:"1rem"}))),n.default.createElement("div",{className:"story-bg"})))}r(85002),d.propTypes={},t.default=d},72508:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(67294)),a=o(r(45697));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.count_step,r=e.active_step;return n.default.createElement("div",{className:"display-flex-center flex-nowrap"},Array(t).fill(0).map((function(e,t){return n.default.createElement("div",{key:""+t,className:"StoryStep_item flex-grow-1"},n.default.createElement("div",{className:"StoryStep_item-contain bg-primary "+(t<=r?"opacity-1":"opacity-05")}))})))}r(1970),i.propTypes={count_step:a.default.number,active_step:a.default.number},t.default=i},22132:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(67294),o=c(a),i=(c(r(45697)),r(32006)),l=c(r(37279)),u=c(r(46054));function c(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.vid_pic,r=e.text,c=e.top_text,s=e.left_text,d=e.color_text_ix,_=e.scale_text,f="img"==(0,i.type_video_or_img)(t),m=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}((0,a.useState)({show_control:!f}),2),p=m[0],v=m[1],y=p.show_control,h=(0,a.useRef)(null),w=(0,a.useRef)(null);return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"wh-100",onClick:function(){f||(v(n({},p,{show_control:!y})),y?clearTimeout(w.current):w.current=setTimeout((function(){v(n({},p,{show_control:!1}))}),1e3))}},f?o.default.createElement("img",{src:t,alt:"",className:"wh-100 object-fit-cover"}):o.default.createElement(o.default.Fragment,null,o.default.createElement("video",{src:t,alt:"",ref:h,className:"wh-100 object-fit-contain"}),o.default.createElement("div",{className:"StoryItem_control pos-abs-center "+(y?"":"display-none")},o.default.createElement("div",{className:"StoryItem_control-contain",onClick:function(){f||(h.current.played?h.current.pause():h.current.play(),v(n({},p,{show_control:!1})),clearTimeout(w.current))}},o.default.createElement(l.default,{x:200}))))),o.default.createElement(u.default,{text:r,top_text:c,left_text:s,color_text_ix:d,scale_text:_}))}s.propTypes={},t.default=s},75561:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(67294)),a=(l(r(45697)),l(r(37930))),o=l(r(11623)),i=l(r(78569));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=e.viewer_arr,r=e.count_friend_view,l=e.is_fetching,u=e.handleShowMore,c=e.handleCloseFriendViewer;return n.default.createElement("div",{className:"StoryViewerList position-rel h-100per overflow-y-auto bg-primary brs-8px"},n.default.createElement("div",{className:"StoryViewerList_hide"},n.default.createElement("div",{className:"cursor-pointer",onClick:c},n.default.createElement(a.default,{y:400}))),n.default.createElement("div",null,n.default.createElement("ul",{className:"list-none"},t.map((function(e){return n.default.createElement("li",{key:""+e.id},n.default.createElement(i.default,{user:e.user,type_like_arr:e.type_like_arr,has_reply:e.has_reply}))})))),n.default.createElement("div",null,n.default.createElement(o.default,{is_show_more:r>t.length,is_fetching:l,handleShowMore:u})))}r(2066),u.propTypes={},t.default=u},78569:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(67294),a=u(n),o=(u(r(45697)),r(15130)),i=r(53898),l=u(r(44314));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=e.user,r=e.type_like_arr,u=e.has_reply,c=(0,n.useContext)(o.context_api).openRoomChat;return a.default.createElement("div",{className:"StoryViewerItem padding-8px",onClick:function(){c(t.id)}},a.default.createElement("div",{className:"flex-between-center"},a.default.createElement("div",null,a.default.createElement(l.default,{user:t,content:u?"Has reply":""})),a.default.createElement("div",null,a.default.createElement("ul",{className:"list-none display-flex"},r.map((function(e,t){return a.default.createElement("li",{key:""+t},i.type_likes[e].component)}))))))}c.propTypes={},t.default=c},26537:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(67294));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.count_other_viewer,r=e.count_friend_viewer,a=e.handleToggleFriendView;return n.default.createElement("div",{className:"text-white"},n.default.createElement("div",{className:"display-flex"},n.default.createElement("div",{className:"padding-8px "+(r?"cursor-pointer":"display-none"),onClick:a},n.default.createElement("span",null,r," friend",r>1?"s":"")),n.default.createElement("div",{className:"padding-8px "+(t?"":"display-none")},n.default.createElement("span",null,t," other",t>1?"s":""))))}a(r(45697)),o.propTypes={},t.default=o},8863:(e,t,r)=>{"use strict";r.r(t)},24150:(e,t,r)=>{"use strict";r.r(t)},85002:(e,t,r)=>{"use strict";r.r(t)},1970:(e,t,r)=>{"use strict";r.r(t)},2066:(e,t,r)=>{"use strict";r.r(t)}}]);
//# sourceMappingURL=9648.js.map