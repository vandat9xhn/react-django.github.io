(self.webpackChunkmy_webpack=self.webpackChunkmy_webpack||[]).push([[2888],{30476:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initial_story_menu_obj=t.initial_story_obj=void 0;var o=r(86449);t.initial_story_obj=function(){return{user:(0,o.initial_user)(),list:[{id:0,vid_pic:"",created_time:"0",text:"",top_text:"",left_text:"",color_text_ix:0,scale_text:1}],count_new:0,count:0}},t.initial_story_menu_obj=function(){return{user:(0,o.initial_user)(),list:[{id:0,vid_pic:"",created_time:"0",text:"",top_text:"",left_text:"",color_text_ix:0,scale_text:1}],count_new:0,count:0,active_step:0,active_item_ix:0}}},22888:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};t.openScreenStoryPc=function(e){(0,e.openScreenFloor)({FloorComponent:m,story_arr_followed:e.story_arr_followed,story_arr_yours:e.story_arr_yours,count_story_yours:e.count_story_yours,count_story_followed:e.count_story_followed,old_active_ix:e.active_ix,old_story_type:e.story_type,has_close:e.has_close})};var a=r(67294),n=f(a),l=f(r(45697)),s=r(30476),c=r(22387),u=r(30796),i=f(r(37930)),d=f(r(86486)),_=f(r(17137));function f(e){return e&&e.__esModule?e:{default:e}}function y(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function m(e){var t,r,l=(t=regeneratorRuntime.mark((function e(t){var r,a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.handle_API_FeedStory_L)(0,t);case 2:r=e.sent,a=r.data,n=r.count,E((function(e){return o({},e,(r={},l=t,s={story_arr:[].concat(y(e[t].story_arr),y(a)),count_story:n,has_fetched:!0},l in r?Object.defineProperty(r,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[l]=s,r));var r,l,s}));case 6:case"end":return e.stop()}}),e,this)})),r=function(){var e=t.apply(this,arguments);return new Promise((function(t,r){return function o(a,n){try{var l=e[a](n),s=l.value}catch(e){return void r(e)}if(!l.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));t(s)}("next")}))},function(e){return r.apply(this,arguments)}),f=e.story_arr_followed,m=e.story_arr_yours,p=e.count_story_yours,h=e.count_story_followed,v=e.old_active_ix,S=e.old_story_type,x=e.has_close,g=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],o=!0,a=!1,n=void 0;try{for(var l,s=e[Symbol.iterator]();!(o=(l=s.next()).done)&&(r.push(l.value),!t||r.length!==t);o=!0);}catch(e){a=!0,n=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}((e.closeScreen,(0,a.useState)({active_ix:v,story_type:S,is_show_menu:!0,followed:{story_arr:f||[(0,s.initial_story_menu_obj)()],count_story:h,has_fetched:h>0},yours:{story_arr:m||[(0,s.initial_story_menu_obj)()],count_story:p,has_fetched:h>0}})),2),b=g[0],E=g[1],w=b.active_ix,P=b.story_type,N=b.is_show_menu,M=b.followed,C=b.yours,j=b[P],k=j.story_arr,A=j.count_story,O=j.has_fetched;function T(e,t){e==w&&P==t||E(o({},b,{active_ix:e,story_type:t}))}function U(){history.back()}return(0,u.useMakeBodyHidden)({blur_header:x,hidden_scroll:!0,hidden_app:!0,hidden_header:x}),(0,a.useEffect)((function(){h>f.length&&l("followed"),0==p&&l("yours")}),[]),n.default.createElement("div",{className:"ScreenStoryPc wh-100v "+(x?"":"ScreenStoryPc-has_head")},n.default.createElement("div",{className:"display-flex h-100per"},n.default.createElement("div",{className:"ScreenStoryPc_left position-rel "+(N?"ScreenStoryPc_left-show":"ScreenStoryPc_left-hide")},n.default.createElement(d.default,{story_type:P,active_ix:w,is_show_menu:N,has_close:x,story_followed_obj:M,story_your_obj:C,handleChangeUserStory:function(e){T(e,"followed")},handleChangeYourStory:function(e){T(e,"yours")},handleClose:U,handleToggleMenu:function(){E((function(e){return o({},e,{is_show_menu:!N})}))}})),n.default.createElement("div",{className:"flex-grow-1 position-rel"},O&&k.length>0?n.default.createElement(_.default,{count_story:A,story_arr:k,active_ix:w,story_type:P,handleNextStoryUser:function(){E(o({},b,{active_ix:w+1}))},handlePrevStoryUser:function(){E(o({},b,{active_ix:w-1}))}}):n.default.createElement("div",{className:"wh-100 bg-loader"}))),n.default.createElement("div",{className:"ScreenStoryPc_close display-none"},n.default.createElement("div",{className:"cursor-pointer",onClick:U},n.default.createElement(i.default,{y:400}))))}r(78165),m.propTypes={story_arr_followed:l.default.array,story_arr_yours:l.default.array,count_story_yours:l.default.number,count_story_followed:l.default.number,old_active_ix:l.default.number,old_story_type:l.default.string,has_close:l.default.bool,closeScreen:l.default.func},m.defaultProps={story_arr_followed:[],story_arr_yours:[],count_story_yours:0,count_story_followed:0,old_active_ix:0,old_story_type:"followed",has_close:!1},t.default=m},17137:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(67294)),a=(n(r(45697)),n(r(49648)));function n(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.story_arr,r=e.count_story,n=e.active_ix,l=e.story_type,s=e.handleNextStoryUser,c=e.handlePrevStoryUser;return o.default.createElement("div",{className:"h-100per padding-8px bg-loader display-flex-center"},o.default.createElement("div",{className:"ScreenStoryItemPc_contain position-rel h-100per"},o.default.createElement(a.default,{story_arr:t,count_story:r,active_ix:n,story_type:l,handleNextStoryUser:s,handlePrevStoryUser:c,closeScreen:void 0})))}r(93251),l.propTypes={},t.default=l},86486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(r(67294)),a=(s(r(45697)),s(r(53614))),n=s(r(25290)),l=s(r(2343));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=e.story_type,r=e.active_ix,s=e.is_show_menu,c=e.has_close,u=e.story_followed_obj,i=e.story_your_obj,d=e.handleChangeUserStory,_=e.handleChangeYourStory,f=e.handleClose,y=e.handleToggleMenu;return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"ScreenStoryMenuPc_action "+(s?"ScreenStoryMenuPc_action-show":"ScreenStoryMenuPc_action-hide")},o.default.createElement(l.default,{is_show:s,has_close:c,handleClose:f,handleToggle:y})),o.default.createElement("div",{className:"ScreenStoryMenuPc h-100per padding-8px bg-primary "+(s?"ScreenStoryMenuPc_show":"ScreenStoryMenuPc_hide")},o.default.createElement("h1",{className:"ScreenStoryMenuPc_head font-22px label-field"},"Stories"),o.default.createElement("div",null,o.default.createElement(a.default,{heading:"Your stories",is_active_type:"yours"==t,active_ix:r,story_menu_obj:i,handleChangeStory:_}),o.default.createElement(n.default,null)),o.default.createElement("div",null,o.default.createElement(a.default,{heading:"All stories",is_active_type:"followed"==t,active_ix:r,story_menu_obj:u,handleChangeStory:d}))))}r(82346),c.propTypes={},t.default=c},53614:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(67294)),a=(n(r(45697)),n(r(44314)));function n(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.heading,r=e.is_active_type,n=e.active_ix,l=e.story_menu_obj,s=e.handleChangeStory,c=l.has_fetched,u=l.story_arr;return o.default.createElement("div",null,o.default.createElement("h2",{className:"margin-0 font-20px padding-8px"},t),o.default.createElement("div",{className:c?"":"display-none"},o.default.createElement("ul",{className:"list-none"},u.map((function(e,t){return o.default.createElement("li",{key:""+e.user.id},o.default.createElement("div",{className:"padding-4px "+(r&&n==t?"bg-active-fb pointer-events-none":"hv-bg-blur cursor-pointer"),onClick:function(){return s(t)}},o.default.createElement(a.default,{user:e.user})))})))),o.default.createElement("div",{className:c?"display-none":"StoryFollowedPc_not_fetched"}))}r(59818),l.propTypes={},t.default=l},2343:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(67294)),a=(n(r(45697)),n(r(37930)));function n(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.is_show,r=e.has_close,n=e.handleClose,l=e.handleToggle;return o.default.createElement("div",{className:"position-rel"},o.default.createElement("div",{className:"display-flex align-items-center"},r?o.default.createElement("div",{className:"StoryMenuPcAction_close"},o.default.createElement("div",{className:"StoryMenuPcAction_close-contain cursor-pointer",onClick:n,title:"Close stories"},o.default.createElement(a.default,{y:400}))):null,o.default.createElement("div",{className:"StoryMenuPcAction_toggle"},o.default.createElement("div",{className:"StoryMenuPcAction_toggle-contain display-flex-center cursor-pointer "+(t?"StoryMenuPcAction_toggle-contain-show":"StoryMenuPcAction_toggle-contain-hide"),onClick:l,title:t?"Hide menu":"Show menu"},o.default.createElement(a.default,{y:200,size_icon:"1rem"})))))}r(96099),l.propTypes={},t.default=l},25290:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(67294),a=s(o),n=(s(r(45697)),r(15130)),l=s(r(37930));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=(0,o.useContext)(n.context_api).openScreenCreateStory;return a.default.createElement("div",{className:"StoryCreatePc padding-8px cursor-pointer",onClick:t},a.default.createElement("div",{className:"display-flex align-items-center"},a.default.createElement("div",{className:"StoryCreatePc_left"},a.default.createElement("div",{className:"StoryCreatePc_left-contain display-flex-center bg-ccc brs-50"},a.default.createElement(l.default,{y:400,size_icon:"1.25rem"}))),a.default.createElement("div",{className:"StoryCreatePc_right"},a.default.createElement("div",null,a.default.createElement("span",{className:"label-field"},"Create a story")),a.default.createElement("div",null,a.default.createElement("span",{className:"font-12px"},"Share a photo or write something.")))))}r(29117),c.propTypes={},t.default=c},78165:(e,t,r)=>{"use strict";r.r(t)},93251:(e,t,r)=>{"use strict";r.r(t)},82346:(e,t,r)=>{"use strict";r.r(t)},59818:(e,t,r)=>{"use strict";r.r(t)},96099:(e,t,r)=>{"use strict";r.r(t)},29117:(e,t,r)=>{"use strict";r.r(t)}}]);
//# sourceMappingURL=2888.js.map