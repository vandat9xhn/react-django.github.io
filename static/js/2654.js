(self.webpackChunkmy_webpack=self.webpackChunkmy_webpack||[]).push([[2654],{30476:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initial_story_menu_obj=t.initial_story_obj=void 0;var o=r(86449);t.initial_story_obj=function(){return{user:(0,o.initial_user)(),list:[{id:0,vid_pic:"",created_time:"0",text:"",top_text:"",left_text:"",color_text_ix:0,scale_text:1}],count_new:0,count:0}},t.initial_story_menu_obj=function(){return{user:(0,o.initial_user)(),list:[{id:0,vid_pic:"",created_time:"0",text:"",top_text:"",left_text:"",color_text_ix:0,scale_text:1}],count_new:0,count:0,active_step:0,active_item_ix:0}}},77964:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openScreenCreateStoryPc=function(e){var t=e.openScreenFloor,r=void 0===t?function(){}:t,o=e.has_history,a=void 0===o||o,n=e.hidden_before;r({FloorComponent:s,has_history:a,hidden_before:void 0!==n&&n})};var o=l(r(67294)),a=(l(r(45697)),r(30796)),n=l(r(48759));function l(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.closeScreen;return(0,a.useMakeBodyHidden)({hidden_app:!0,hidden_header:!0}),o.default.createElement(n.default,{show_fav:!0,closeScreen:t})}s.propTypes={},t.default=s},62750:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=u(r(67294)),a=(u(r(45697)),u(r(45915))),n=u(r(44314));r(22301);var l=u(r(40040)),s=u(r(98281));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=e.heading,r=e.story_menu_obj,u=e.is_active_type,c=e.active_ix,i=e.ref_fake_elm,d=e.handleChangeStory,_=r.has_fetched,f=r.story_arr,y=r.count_story;return o.default.createElement("div",{className:"StoryMenuPartPc"},f.length?o.default.createElement("h2",{className:"margin-0 font-20px padding-10px"},t):null,o.default.createElement("div",{className:_?"":"display-none"},f.map((function(e,t){return o.default.createElement("div",{key:e.user.id,className:"padding-5px brs-6px "+(u&&c==t?"bg-fb-active pointer-events-none":"hv-bg-blur cursor-pointer"),onClick:function(){return d(t)}},o.default.createElement(n.default,{user:e.user,content:o.default.createElement("span",{className:"line-14px font-12px text-third"},(0,a.default)((new Date).getTime()-new Date(e.list.slice(-1)[0].created_time)))}))}))),o.default.createElement("div",{ref:i,className:"padding-1px"}),o.default.createElement(l.default,{has_fetched:_&&y<=f.length,component:o.default.createElement(s.default,null),num:1}))}c.propTypes={},t.default=c},45811:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(67294)),a=(n(r(45697)),n(r(37930)));function n(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.is_show,r=e.has_close,n=e.handleClose,l=e.handleToggle;return o.default.createElement("div",{className:"pos-rel"},o.default.createElement("div",{className:"display-flex align-items-center"},r?o.default.createElement("div",{className:"StoryMenuPcAction_close"},o.default.createElement("div",{className:"StoryMenuPcAction_close_contain cursor-pointer",onClick:n,title:"Close stories"},o.default.createElement(a.default,{y:400}))):null,o.default.createElement("div",{className:"StoryMenuPcAction_toggle"},o.default.createElement("div",{className:"StoryMenuPcAction_toggle_contain display-flex-center cursor-pointer "+(t?"StoryMenuPcAction_toggle_contain-show":"StoryMenuPcAction_toggle_contain-hide"),onClick:l,title:t?"Hide menu":"Show menu"},o.default.createElement(a.default,{y:200,size_icon:"1rem"})))))}r(32554),l.propTypes={},t.default=l},82468:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(67294),a=u(o),n=(u(r(45697)),r(15130)),l=r(77964),s=u(r(37930));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=(0,o.useContext)(n.context_api).openScreenFloor;return a.default.createElement("div",{className:"StoryBtnCreatePc padding-8px cursor-pointer",onClick:function(){(0,l.openScreenCreateStoryPc)({openScreenFloor:t,show_fav:!0,hidden_before:!0}),history.pushState("","","/story/create")}},a.default.createElement("div",{className:"display-flex align-items-center"},a.default.createElement("div",{className:"StoryBtnCreatePc_left"},a.default.createElement("div",{className:"StoryBtnCreatePc_left_contain display-flex-center bg-ccc brs-50"},a.default.createElement(s.default,{y:400,size_icon:"1.25rem"}))),a.default.createElement("div",{className:"StoryBtnCreatePc_right"},a.default.createElement("div",null,a.default.createElement("span",{className:"font-500"},"Create a story")),a.default.createElement("div",null,a.default.createElement("span",{className:"font-12px"},"Share a photo or write something.")))))}r(24281),c.propTypes={},t.default=c},32654:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a=r(67294),n=f(a),l=f(r(45697)),s=r(30476),u=r(22387),c=r(31297),i=f(r(37930)),d=(f(r(98989)),f(r(23239))),_=f(r(52496));function f(e){return e&&e.__esModule?e:{default:e}}function y(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function m(e){var t,r,l=(t=regeneratorRuntime.mark((function e(t){var r,a,n,l=t.new_story_type,s=void 0===l?N:l,c=t.c_count,i=void 0===c?0:c,d=t.new_active_ix,_=void 0===d?M:d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U.current[s]){e.next=2;break}return e.abrupt("return");case 2:return U.current[s]=!0,P((function(e){return o({},e,{active_ix:_})})),e.next=6,(0,u.handle_API_FeedStory_L)(i,s);case 6:r=e.sent,a=r.data,n=r.count,U.current[s]=!1,P((function(e){var t,r,l,u=e[s],c=u.story_arr,i=u.count_story,d=u.has_fetched?i:n;return F.current[s]=d<=c.length,o({},e,(t={},r=s,l={story_arr:[].concat(y(c),y(a)).slice(0,d),count_story:d,has_fetched:!0},r in t?Object.defineProperty(t,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[r]=l,t))}));case 11:case"end":return e.stop()}}),e,this)})),r=function(){var e=t.apply(this,arguments);return new Promise((function(t,r){return function o(a,n){try{var l=e[a](n),s=l.value}catch(e){return void r(e)}if(!l.done)return Promise.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));t(s)}("next")}))},function(e){return r.apply(this,arguments)}),f=e.story_arr_followed,m=e.count_story_followed,h=e.has_fetched_followed,p=e.story_arr_yours,v=e.count_story_yours,g=e.has_fetched_yours,w=e.old_active_ix,x=e.old_story_type,b=e.has_close,S=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],o=!0,a=!1,n=void 0;try{for(var l,s=e[Symbol.iterator]();!(o=(l=s.next()).done)&&(r.push(l.value),!t||r.length!==t);o=!0);}catch(e){a=!0,n=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}((e.closeScreen,(0,a.useState)({active_ix:w,story_type:x,is_show_menu:!0,followed:{story_arr:f||[(0,s.initial_story_menu_obj)()],count_story:m,has_fetched:h},yours:{story_arr:p||[(0,s.initial_story_menu_obj)()],count_story:v,has_fetched:g}})),2),E=S[0],P=S[1],M=E.active_ix,N=E.story_type,C=E.is_show_menu,j=E.followed,k=E.yours,A=E[N],O=A.story_arr,T=A.count_story,H=A.has_fetched,U=(0,a.useRef)({followed:!1,yours:!1}),F=(0,a.useRef)({followed:!1,yours:!1}),I=(0,a.useRef)(null),R=(0,a.useRef)(null),B=(0,c.useObserverGetData)({getData_API:function(){return l({})},getIsMax:function(){return F.current.followed},getIsFetching:function(){return U.current.followed}}).observerShowMore;function D(e,t){e==M&&N==t||P(o({},E,{active_ix:e,story_type:t}))}function z(){history.back()}return(0,a.useEffect)((function(){!g&&l({new_story_type:"yours"}),(!h||m>=5)&&(l({new_story_type:"followed"}),B({fake_elm_end:R.current,root:I.current,rootMargin:"0px",way_scroll:"to_bottom",margin:0}))}),[]),n.default.createElement("div",{className:"StoryHomePc "+(b?"wh-100v":"StoryHomePc-has_head")},n.default.createElement("div",{className:"display-flex h-100per"},n.default.createElement("div",{className:"StoryHomePc_left pos-rel "+(C?"StoryHomePc_left-show":"StoryHomePc_left-hide")},n.default.createElement(d.default,{story_type:N,active_ix:M,is_show_menu:C,has_close:b,story_followed_obj:j,story_your_obj:k,ref_menu:I,ref_fake_elm_followed:R,handleChangeUserStory:function(e){D(e,"followed")},handleChangeYourStory:function(e){D(e,"yours")},handleClose:z,handleToggleMenu:function(){P((function(e){return o({},e,{is_show_menu:!C})}))}})),n.default.createElement("div",{className:"flex-grow-1 pos-rel"},H&&O.length>0?n.default.createElement(_.default,{count_story:T,story_arr:O,active_ix:M,story_type:N,handleNextStoryUser:function(){var e=M+1;e>=O.length?l({new_active_ix:e,c_count:e}):P(o({},E,{active_ix:M+1}))},handlePrevStoryUser:function(){P(o({},E,{active_ix:M-1}))}}):null)),n.default.createElement("div",{className:"StoryHomePc_close display-none"},n.default.createElement("div",{className:"cursor-pointer",onClick:z},n.default.createElement(i.default,{y:400}))))}r(80951),m.propTypes={story_arr_followed:l.default.array,count_story_followed:l.default.number,has_fetched_followed:l.default.bool,story_arr_yours:l.default.array,count_story_yours:l.default.number,has_fetched_yours:l.default.bool,old_active_ix:l.default.number,old_story_type:l.default.string,has_close:l.default.bool,closeScreen:l.default.func},m.defaultProps={story_arr_followed:[],count_story_followed:0,has_fetched_followed:!1,story_arr_yours:[],count_story_yours:0,has_fetched_yours:!1,old_active_ix:0,old_story_type:"followed",has_close:!1},t.default=m},52496:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(67294)),a=(n(r(45697)),n(r(19113)));function n(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.story_arr,r=e.count_story,n=e.active_ix,l=e.story_type,s=e.handleNextStoryUser,u=e.handlePrevStoryUser;return o.default.createElement("div",{className:"StoryItemPc h-100per bg-shadow-9 pos-rel"},o.default.createElement(a.default,{story_arr:t,count_story:r,active_ix:n,story_type:l,handleNextStoryUser:s,handlePrevStoryUser:u}))}r(3225),l.propTypes={},t.default=l},23239:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(r(67294)),a=(s(r(45697)),s(r(62750))),n=s(r(45811)),l=s(r(82468));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=e.story_type,r=e.active_ix,s=e.is_show_menu,u=e.has_close,c=e.story_followed_obj,i=e.story_your_obj,d=e.ref_menu,_=e.ref_fake_elm_followed,f=e.handleChangeUserStory,y=e.handleChangeYourStory,m=e.handleClose,h=e.handleToggleMenu;return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"StoryMenuPc_action "+(s?"StoryMenuPc_action-show":"StoryMenuPc_action-hide")},o.default.createElement(n.default,{is_show:s,has_close:u,handleClose:m,handleToggle:h})),o.default.createElement("div",{ref:d,className:"StoryMenuPc h-100per overflow-y-auto bg-primary "+(s?"StoryMenuPc_show":"StoryMenuPc_hide")},o.default.createElement("h1",{className:"StoryMenuPc_head pos-sticky top-0 z-index-lv1 padding-8px bg-primary font-22px font-600"},"Stories"),o.default.createElement("div",{className:"padding-8px"},o.default.createElement(a.default,{heading:"Your stories",is_active_type:"yours"==t,active_ix:r,story_menu_obj:i,handleChangeStory:y}),o.default.createElement(l.default,null)),o.default.createElement("div",{className:"padding-8px"},o.default.createElement(a.default,{heading:"All stories",story_menu_obj:c,is_active_type:"followed"==t,active_ix:r,ref_fake_elm:_,handleChangeStory:f}))))}r(40418),u.propTypes={},t.default=u},22301:(e,t,r)=>{"use strict";r.r(t)},32554:(e,t,r)=>{"use strict";r.r(t)},24281:(e,t,r)=>{"use strict";r.r(t)},80951:(e,t,r)=>{"use strict";r.r(t)},3225:(e,t,r)=>{"use strict";r.r(t)},40418:(e,t,r)=>{"use strict";r.r(t)}}]);
//# sourceMappingURL=2654.js.map