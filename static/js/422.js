(self.webpackChunkmy_webpack=self.webpackChunkmy_webpack||[]).push([[422],{45915:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Just now";return e>=31536e6?Math.floor(e/31536e6)+" y":e>=2592e6?Math.floor(e/2592e6)+" mon":e>=864e5?Math.floor(e/864e5)+" d":e>=36e5?Math.floor(e/36e5)+" h":e>=6e4?Math.floor(e/6e4)+" m":t}},50664:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.openScreenStoryItemMobile=function(e){(0,e.openScreenFloor)({FloorComponent:f,story_arr:e.story_arr,old_active_ix:e.active_ix,story_type:e.story_type})};var a=r(67294),l=d(a),o=(d(r(45697)),r(22387)),i=r(82403),c=d(r(40535));r(57087);var u=r(30796),s=d(r(98989));function d(e){return e&&e.__esModule?e:{default:e}}function f(e){var t,r,d=(t=regeneratorRuntime.mark((function e(){var t,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h((function(e){return n({},e,{is_fetching:!0})})),e.next=3,(0,o.handle_API_FeedStory_R)({is_next:r,id:O,story_type:p});case 3:t=e.sent,r?(S.push(t),E.active_item_ix+=1,E.active_step+=1):(S.unshift(t),E.active_step-=1),h((function(e){return n({},e,{is_fetching:!1})}));case 6:case"end":return e.stop()}}),e,this)})),r=function(){var e=t.apply(this,arguments);return new Promise((function(t,r){return function n(a,l){try{var o=e[a](l),i=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(i).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(i)}("next")}))},function(){return r.apply(this,arguments)}),f=e.story_arr,_=e.old_active_ix,p=e.story_type,m=e.closeScreen,v=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,l=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw l}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}((0,a.useState)({active_ix:_,is_fetching:!1}),2),y=v[0],h=v[1],x=y.active_ix,b=y.is_fetching,E=f[x],S=E.list,g=E.user,w=E.count,M=(E.count_new,E.active_step),N=E.active_item_ix,I=S[N],O=I.id,P=I.vid_pic,j=I.created_time,k=I.text,C=I.top_text,T=I.left_text,F=I.color_text_ix,A=I.scale_text,R=M<w-1||x<f.length-1,B=M>0||x>0,L=(0,i.useForceUpdate)();return(0,u.useMakeBodyHidden)(),l.default.createElement("div",{className:"wh-100v bg-loader display-flex-center"},l.default.createElement("div",{className:"ScreenStoryItemMobile_item "+(b?"pointer-events-none opacity-05":"")},l.default.createElement(c.default,{handleCloseStoryItem:m,active_step:M,is_has_next:R,is_has_prev:B,handleNext:function(){R&&(M==w-1?h(n({},y,{active_ix:x+1})):function(){if(N<S.length-1)return E.active_item_ix+=1,E.active_step+=1,void L();d(!0)}())},handlePrev:function(){B&&(0==M?h(n({},y,{active_ix:x-1})):function(){if(N>0)return E.active_item_ix-=1,E.active_step-=1,void L();d(!1)}())},user:g,count:w,vid_pic:P,created_time:j,text:""+k,top_text:C,left_text:T,color_text_ix:F,scale_text:A})),l.default.createElement("div",{className:"pos-abs-center"},l.default.createElement(s.default,{is_fetching:b})))}f.propTypes={},t.default=f},422:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openScreenStoryMenuMobile=function(e){(0,e.openScreenFloor)({FloorComponent:u})};var n=c(r(67294)),a=(c(r(45697)),r(30796)),l=c(r(63518)),o=c(r(13852)),i=c(r(94933));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){return e.closeScreen,(0,a.useMakeBodyHidden)({hidden_app:!0,hidden_header:!0}),n.default.createElement("div",{className:"bg-primary"},n.default.createElement("div",null,n.default.createElement("div",{className:"ScreenStoryMenuMobile_create margin-auto padding-8px"},n.default.createElement(l.default,null)),n.default.createElement("div",{className:"ScreenStoryMenuMobile_item"},n.default.createElement(o.default,null)),n.default.createElement("div",{className:"ScreenStoryMenuMobile_item"},n.default.createElement(i.default,null))))}r(59346),u.propTypes={},t.default=u},40535:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(r(67294)),a=(d(r(45697)),r(55852)),l=d(r(45915)),o=d(r(37930)),i=d(r(8119)),c=d(r(61498)),u=d(r(22132)),s=d(r(72508));function d(e){return e&&e.__esModule?e:{default:e}}function f(e){var t=e.handleCloseStoryItem,r=e.active_step,d=e.is_has_next,f=e.is_has_prev,_=e.handleNext,p=e.handlePrev,m=e.user,v=e.count,y=e.vid_pic,h=e.created_time,x=e.text,b=e.top_text,E=e.left_text,S=e.color_text_ix,g=e.scale_text;return n.default.createElement("div",{className:"StoryItem wh-100 "+(a.IS_MOBILE?"position-rel":"")},n.default.createElement("div",{className:"StoryItem-contain position-rel wh-100"},n.default.createElement(u.default,{vid_pic:y,text:x,top_text:b,left_text:E,color_text_ix:S,scale_text:g}),n.default.createElement("div",{className:"StoryItem_head"},n.default.createElement("div",{className:"StoryItem_head-contain padding-8px"},v>1?n.default.createElement("div",{className:"StoryItem_step"},n.default.createElement(s.default,{count_step:v,active_step:r})):null,n.default.createElement("div",{className:"StoryItem_user width-fit-content"},n.default.createElement(i.default,{user:m,content:n.default.createElement("span",{className:"font-12px margin-left-5px"},(0,l.default)((new Date).getTime()-new Date(h).getTime())),is_inline_block:!0})))),n.default.createElement("div",{className:"StoryItem_close "+(a.IS_MOBILE?"":"display-none")},n.default.createElement("div",{className:"StoryItem_close-contain display-flex-center bg-ccc brs-50",onClick:t},n.default.createElement(o.default,{y:400,size_icon:"1rem"}))),n.default.createElement("div",{className:"story-bg"})),n.default.createElement(c.default,{is_btn_circle:!0,is_has_next:d,is_has_prev:f,handleNext:_,handlePrev:p}))}r(85002),f.propTypes={},t.default=f},72508:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(67294)),a=l(r(45697));function l(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.count_step,r=e.active_step;return n.default.createElement("div",{className:"display-flex-center flex-nowrap"},Array(t).fill(0).map((function(e,t){return n.default.createElement("div",{key:""+t,className:"StoryStep_item flex-grow-1"},n.default.createElement("div",{className:"StoryStep_item-contain bg-primary "+(t<=r?"opacity-1":"opacity-05")}))})))}r(1970),o.propTypes={count_step:a.default.number,active_step:a.default.number},t.default=o},22132:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(67294),l=u(a),o=(u(r(45697)),r(32006)),i=u(r(37279)),c=u(r(46054));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.vid_pic,r=e.text,u=e.top_text,s=e.left_text,d=e.color_text_ix,f=e.scale_text,_="img"==(0,o.type_video_or_img)(t),p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,l=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw l}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}((0,a.useState)({show_control:!_}),2),m=p[0],v=p[1],y=m.show_control,h=(0,a.useRef)(null),x=(0,a.useRef)(null);return l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"wh-100",onClick:function(){_||(v(n({},m,{show_control:!y})),y?clearTimeout(x.current):x.current=setTimeout((function(){v(n({},m,{show_control:!1}))}),1e3))}},_?l.default.createElement("img",{src:t,alt:"",className:"wh-100 object-fit-cover"}):l.default.createElement(l.default.Fragment,null,l.default.createElement("video",{src:t,alt:"",ref:h,className:"wh-100 object-fit-contain"}),l.default.createElement("div",{className:"StoryItem_control pos-abs-center "+(y?"":"display-none")},l.default.createElement("div",{className:"StoryItem_control-contain",onClick:function(){_||(h.current.played?h.current.pause():h.current.play(),v(n({},m,{show_control:!1})),clearTimeout(x.current))}},l.default.createElement(i.default,{x:200}))))),l.default.createElement(c.default,{text:r,top_text:u,left_text:s,color_text_ix:d,scale_text:f}))}s.propTypes={},t.default=s},63518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(67294),a=i(n),l=(i(r(45697)),r(15130)),o=i(r(37930));function i(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=(0,n.useContext)(l.context_api).openScreenCreateStory;return a.default.createElement("button",{className:"StoryCreate btn btn-hv btn-active padding-8px brs-8px cursor-pointer",onClick:t},a.default.createElement("div",{className:"flex-between-center"},a.default.createElement("div",{className:"StoryCreate_left"},a.default.createElement("span",{className:"label-field font-18px text-white"},"Create story")),a.default.createElement("div",{className:"StoryCreate_right"},a.default.createElement(o.default,{y:400}))))}r(45452),c.propTypes={},t.default=c},72788:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(67294),l=s(a),o=(s(r(45697)),r(15130)),i=(r(30476),r(22387)),c=r(50664),u=s(r(22405));function s(e){return e&&e.__esModule?e:{default:e}}function d(e){var t,r,s=(t=regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.handle_API_FeedStory_L)(0,d);case 2:t=e.sent,(r=t.data).map((function(e){return e.active_step=0==e.count_new?0:e.count-e.count_new,e.active_item_ix=0,e})),v((function(e){return n({},e,{story_arr:r,has_fetched:!0})}));case 6:case"end":return e.stop()}}),e,this)})),r=function(){var e=t.apply(this,arguments);return new Promise((function(t,r){return function n(a,l){try{var o=e[a](l),i=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(i).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(i)}("next")}))},function(){return r.apply(this,arguments)}),d=e.story_type,f=e.heading,_=(0,a.useContext)(o.context_api).openScreenFloor,p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,l=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw l}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}((0,a.useState)({story_arr:[]||0,has_fetched:!1}),2),m=p[0],v=p[1],y=m.story_arr,h=m.has_fetched;return(0,a.useEffect)((function(){s(d)}),[]),l.default.createElement("div",null,l.default.createElement("h2",{className:"margin-0 font-20px padding-8px"},f),l.default.createElement("div",{className:h?"":"display-none"},l.default.createElement("ul",{className:"list-none display-flex flex-wrap"},y.map((function(e,t){return l.default.createElement("li",{key:""+e.user.id,className:"cursor-pointer hv-bg-ccc story-face",onClick:function(){return function(e){(0,c.openScreenStoryItemMobile)({openScreenFloor:_,story_arr:y,active_ix:e,story_type:d})}(t)}},l.default.createElement("div",{className:"StoryMenuMobile_item"},l.default.createElement(u.default,{user:e.user,count_new:e.count_new,vid_pic:e.list[0].vid_pic,text:e.list[0].text,top_text:e.list[0].top_text,left_text:e.list[0].left_text,color_text_ix:e.list[0].color_text_ix,scale_text:e.list[0].scale_text})))})))),l.default.createElement("div",{className:h?"display-none":"StoryMenuMobile_skeleton"}))}r(6911),d.propTypes={},t.default=d},13852:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(67294)),a=(l(r(45697)),l(r(72788)));function l(e){return e&&e.__esModule?e:{default:e}}function o(e){return n.default.createElement(a.default,{story_type:"followed",heading:"Stories"})}o.propTypes={},t.default=o},94933:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(67294)),a=(l(r(45697)),l(r(72788)));function l(e){return e&&e.__esModule?e:{default:e}}function o(e){return n.default.createElement(a.default,{story_type:"suggested",heading:"Suggested for you"})}o.propTypes={},t.default=o},57087:(e,t,r)=>{"use strict";r.r(t)},59346:(e,t,r)=>{"use strict";r.r(t)},85002:(e,t,r)=>{"use strict";r.r(t)},1970:(e,t,r)=>{"use strict";r.r(t)},45452:(e,t,r)=>{"use strict";r.r(t)},6911:(e,t,r)=>{"use strict";r.r(t)}}]);
//# sourceMappingURL=422.js.map